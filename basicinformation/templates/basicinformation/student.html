{%extends 'basicinformation/base.html' %}
{% load staticfiles %}

<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{%block title %}Student Page{%endblock %}</title>
    {%block scripts %}
     <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
     <script>
     $(document).ready(function () {

      $('.well').each(function(index,element){

         if ($(this).children('#subjectName').text()== 'Science'){
             var upper
             $(this).children('#prediction').text('Science Marks Prediction for Half Yearly:  ' + '{{sciencehy_prediction}}%  (+-5%)');
             var ctxscience = $(this).children('#myChart');

        var myChartscience = new Chart(ctxscience, {
            type: 'bar',
            data: {
                labels: ["Test1","Test2","Test3","Predicted Half Yearly"],
                datasets: [{
                    label: 'Student performance and predictions',
                    data: [parseInt({{science1}})*10,parseInt({{science2}})*10,parseInt({{science3}})*10,parseInt({{sciencehy_prediction}})],
                    backgroundColor: [
                        'rgba(255, 99, 132, 0.2)',
                        'rgba(54, 162, 235, 0.2)',
                        'rgba(255, 206, 86, 0.2)',
                        'rgba(75, 192, 192, 0.2)',
                        'rgba(153, 102, 255, 0.2)',
                        'rgba(255, 159, 64, 0.2)'
                    ],
                    borderColor: [
                        'rgba(255,99,132,1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(255, 206, 86, 1)',
                        'rgba(75, 192, 192, 1)',
                        'rgba(153, 102, 255, 1)',
                        'rgba(255, 159, 64, 1)'
                    ],
                    borderWidth: 3
                }]
            },
            options: {   responsive: true,
                scales: {
                    yAxes: [{
                        ticks: {
                            beginAtZero:true,
                            max: 100
                        }
                    }]
                }
            }
        });

         }
         else if ($(this).children('#subjectName').text()== 'Maths'){

             $(this).children('#prediction').text('Maths Marks Prediction for Half Yearly '+ '{{mathshy_prediction}}%  (+-5%)');
             var ctxmaths = $(this).children('#myChart');

        var myChartmaths = new Chart(ctxmaths, {
            type: 'bar',
            data: {
                labels: ["Test1","Test2","Test3","Predicted Half Yearly"],
                datasets: [{
                    label: 'Student performance and predictions',
                    data: [parseInt({{maths1}})*10,parseInt({{maths2}})*10,parseInt({{maths3}})*10,parseInt({{mathshy_prediction}})],
                    backgroundColor: [
                        'rgba(255, 99, 132, 0.2)',
                        'rgba(54, 162, 235, 0.2)',
                        'rgba(255, 206, 86, 0.2)',
                        'rgba(75, 192, 192, 0.2)',
                        'rgba(153, 102, 255, 0.2)',
                        'rgba(255, 159, 64, 0.2)'
                    ],
                    borderColor: [
                        'rgba(255,99,132,1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(255, 206, 86, 1)',
                        'rgba(75, 192, 192, 1)',
                        'rgba(153, 102, 255, 1)',
                        'rgba(255, 159, 64, 1)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {  responsive: true,
                scales: {
                    yAxes: [{
                        ticks: {
                            beginAtZero:true,
                            max: 100
                        }
                    }]
                }
            }
        });
         }
         else if ($(this).children('#subjectName').text()== 'Hindi'){

             $(this).children('#prediction').text('Hindi Marks Prediction for Half Yearly '+ '{{hindihy_prediction}}%  (+-5%)');
             var ctxhindi = $(this).children('#myChart');

        var myChart = new Chart(ctxhindi, {
            type: 'line',
            data: {
                labels: ["Test1","Test2","Test3","Predicted Half Yearly"],
                datasets: [{
                    label: 'Student performance and predictions',
                    data: [parseInt({{hindi1}})*10,parseInt({{hindi2}})*10,parseInt({{hindi3}})*10,parseInt({{hindihy_prediction}})],
                    backgroundColor: [
                        'rgba(255, 99, 132, 0.2)',
                        'rgba(54, 162, 235, 0.2)',
                        'rgba(255, 206, 86, 0.2)',
                        'rgba(75, 192, 192, 0.2)',
                        'rgba(153, 102, 255, 0.2)',
                        'rgba(255, 159, 64, 0.2)'
                    ],
                    borderColor: [
                        'rgba(255,99,132,1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(255, 206, 86, 1)',
                        'rgba(75, 192, 192, 1)',
                        'rgba(153, 102, 255, 1)',
                        'rgba(255, 159, 64, 1)'
                    ],
                    borderWidth: 3
                }]
            },
            options: {  responsive: true,
                scales: {
                    yAxes: [{
                        ticks: {
                            beginAtZero:true,
                            max: 100
                        }
                    }]
                }
            }
        });
         }
         else if ($(this).children('#subjectName').text()== 'English'){
             {% if  english4 == None %} {%endif%}
             $(this).children('#prediction').text('English Marks Prediction for Half Yearly '+ '{{englishhy_prediction}}%  (+-5%)');
             var ctxenglish = $(this).children('#myChart');

        var myChartenglish = new Chart(ctxenglish, {
            type: 'bar',
            data: {
                labels: ["Test1","Test2","Test3","Predicted Half Yearly"],
                datasets: [{
                    label: 'Student performance and predictions',
                    fill: true ,

                    data: [parseInt({{english1}})*10,parseInt({{english2}})*10,parseInt({{english3}})*10,parseInt({{englishhy_prediction}})],

                    backgroundColor: [
                        'rgba(255, 99, 132, 0.2)',
                        'rgba(54, 162, 235, 0.2)',
                        'rgba(255, 206, 86, 0.2)',
                        'rgba(75, 192, 192, 0.2)',
                        'rgba(153, 102, 255, 0.2)',
                        'rgba(255, 159, 64, 0.2)'
                    ],
                    borderColor: [
                        'rgba(255,99,132,1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(255, 206, 86, 1)',
                        'rgba(75, 192, 192, 1)',
                        'rgba(153, 102, 255, 1)',
                        'rgba(255, 159, 64, 1)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {   responsive: true,
                scales: {
                    yAxes: [{
                        ticks: {
                            beginAtZero:true,
                            max: 100
                        }
                    }]
                }
            }
        });

         }


      });

 });
     </script>
    <link rel="stylesheet" href="{% static 'basicinformation/style.css' %}">
    {%endblock%}
</head>
<body>
{%block content%}
<h1>Student Page</h1>


<div class="jumbotron">
  <h1 id="name">Hello {{profile.name}}</h1>
  <p>Class: {{profile.klass}}</p>
  <p>Rollnumber: {{profile.rollNumber}}</p>
  <p>Date of Birth: {{profile.dob}}</p>

</div>



<h2 class="text-center">Marks</h2><br>
{%for sub in subjects %}
<div class="well col-md-4 col-md-offset-1"   style="border-style: solid;  border-width: 5px; border-color:#424242; background:rgba(244, 255, 250,0.5) ; ">
<h2 id='subjectName' class="text-center">{{sub.name}}</h2>
{%if sub.test1 %}<p class="testmarks text-center">First test: {{sub.test1}}/10</p>{%endif%}
{%if sub.test2 %}<p class=" text-center">Second test:{{sub.test2}}/10</p>{%endif%}
{%if sub.test3 %}<p class="text-center">Thrid test:{{sub.test3}}/10</p>{%endif%}
{%if sub.test4 %}<p class="text-center">Fourth test:{{sub.test4}}/10</p>{%endif%}
 <p id="prediction" class="text-center"></p>

<canvas  id="myChart" style="display: block; height: 200px; width: 400px; padding-left: 0;
    padding-right: 0;
    margin-left: auto;
    margin-right: auto;" width="300" height="250"></canvas>
</div>
{%endfor%}


{%endblock%}


</body>
</html>
