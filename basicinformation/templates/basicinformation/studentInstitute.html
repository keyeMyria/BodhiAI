{%extends 'basicinformation/base.html' %}
{% load staticfiles %}

<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{%block title %}BodhiAI|Student Page{%endblock %}</title>
    {%block scripts %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
<link rel="stylesheet" type="text/css" href="{% static 'basicinformation/css/studentInstitute.css' %}">
     <script>
{% for key,value in subjectwiseMarks.items %}
     $(document).ready(function () {
	     var ctx{{key|slice:":5"}} = document.getElementById("myChart{{key|slice:":5"}}");
	      myChart = new Chart(ctx{{key|slice:":5"}}, {
            type: 'bar',
            data: {
		    labels: [{% for da in value.time%}'{{da}}',{%endfor%}],
                datasets: [{
                    label: 'Test Marks in percent',



		    data: [{%for ma in value.marks %}{{ma}},{%endfor%}],
			backgroundColor: [
                        'rgba(255, 99, 132, 0.4)',
			'rgba(54, 100, 11, 0.6)',
			'rgba(64, 200, 46, 0.6)',                  
			'rgba(94, 155, 89, 0.6)',                  
			'rgba(104, 255, 55, 0.6)',                 
			'rgba(10, 90, 35, 0.6)',                   
			'rgba(24, 162, 255, 0.6)',                 
			'rgba(94, 12, 25, 0.6)',                   
                                      ],
                    borderColor: [ 'rgba(255,99,132,1)',
		   		 'rgba(54, 100, 11, 1)',
		   		 'rgba(64, 200, 46, 1)',
		   		 'rgba(94, 155, 89, 1)',
		   		 'rgba(104, 255, 55, 1)',
		   		 'rgba(10, 90, 35, 1)',
		   		 'rgba(24, 162, 255, 1)',
		   		 'rgba(94, 12, 25, 1)',
                                            ],




                                  borderWidth: 3



		}]
            },

            options: {   responsive: true,
		    maintainAspectRatio: false,
		    
                scales: {
		                    yAxes: [{
                        ticks: {
                            beginAtZero:true,

                        }
                    }]
                }
            }
        });
        });



     
    {%endfor%}		
     </script>
    {%endblock%}
</head>
<body>
{%block content%}


<div class="jumbotron col-md-offset-1 col-md-10 col-sm-12">
  <h1 id="name">Hello {{profile.name}}</h1>
  <p>Class: {{profile.klass}}</p>
  {% if profile.rollNumber != None %}
  <p>Rollnumber: {{profile.rollNumber}}</p>
  <p>Date of Birth: {{profile.dob}}</p>
  {%endif%}

</div>
<hr>
{%if announcements %}
<h2 style= 'text-align:center;'> Announcements </h2>
	<div class="alert alert-info col-md-offset-1 col-md-10  col-xs-12">
		{% for announcement in announcements %}
		<strong>By: {{announcement.announcer}}  <h3>{{announcement.text}} </strong></h3>
			<h4>on: {{announcement.date}}</h4>
		{%endfor%}
	</div>

{%endif%}
<div class='col-md-12' id='testContainer'>
	<h2 class='text-center' style='font-weight:bold;'>Practice Tests </h2>
{% for key,value in newTests.items %}

	  <div class="col-sm-6 col-md-4 col-md-offset-1" id ='newTests'>
	<div class="thumbnail">
		{% if value.subject == 'Quantitative-Analysis' %}
	 <img src="{% static 'basicinformation/images/mathstest.jpg' %}" alt="...">
	 {%elif value.subject == 'English' %}
	 <img src="{% static 'basicinformation/images/englishtest.jpg' %}" alt="...">
	 {%elif value.subject == 'SSCMultipleSections' %}
	 {%endif%}


		<div class="caption">
			<h3 class='text-center' style='font-weight:bold;'>{% if value.subject == 'SSCMultipleSections'%}Multiple Subjects {%else%}{{value.subject}} {%endif%}</h3>
				<h4 class='text-center'>{{value.num_questions}} questions </h4>
			<h4> Topics </h4>
			<ul>
				{% for i in value.topics %}
				<li>{{i}}</li>
				{%endfor%}
			</ul>
			<div class='text-center'>
				<form action = "{% url 'QuestionsAndPapers:conductTest' %}" method='get'>
					<button type="submit" name='onlineTestid' class="btn btn-primary" value="{{key}}">Take Test</button>
				</form>
			</div>
	</div>
		</div>
		</div>
	{%endfor%}
</div>
</div>
<br>
<div class='col-md-12'>
	<h2 class='text-center' style='font-weight:bold' >Previous Performance </h2>
   {% for key,value in subjectwiseMarks.items %}
 <div class=" col-md-4 col-md-offset-1  col-xs-12" id='graphContainer'   >
	 <h2 id='subjectName' class="text-center">{%if key == 'SSCMultipleSections' %} Complete Test {%else%} {{key}} {%endif%}</h2>
<div>
<canvas  id="myChart{{key|slice:":5"}}"   height="400"></canvas>
</div>
</div>
{%endfor%}
</div>

{%endblock%}


</body>
</html>
